---
titleSuffix: Справочник API конфигурации модулей Gez
description: Подробное описание интерфейса конфигурации ModuleConfig в фреймворке Gez, включая правила импорта и экспорта модулей, настройку алиасов и управление внешними зависимостями, чтобы помочь разработчикам глубже понять модульную систему фреймворка.
head:
  - - meta
    - property: keywords
      content: Gez, ModuleConfig, конфигурация модулей, импорт и экспорт модулей, внешние зависимости, настройка алиасов, управление зависимостями, фреймворк для веб-приложений
---

# ModuleConfig

ModuleConfig предоставляет функциональность конфигурации модулей в фреймворке Gez, используемую для определения правил импорта и экспорта модулей, настройки алиасов и управления внешними зависимостями.

## Определение типов

### PathType

- **Определение типа**:
```ts
enum PathType {
  npm = 'npm:', 
  root = 'root:'
}
```

Перечисление типов путей модулей:
- `npm`: указывает на зависимости в node_modules
- `root`: указывает на файлы в корневой директории проекта

### ModuleConfig

- **Определение типа**:
```ts
interface ModuleConfig {
  exports?: string[]
  links?: Record<string, string>
  imports?: Record<string, string>
}
```

Интерфейс конфигурации модулей, используемый для определения экспорта, импорта и внешних зависимостей сервиса.

#### exports

Список конфигураций экспорта, который позволяет открывать доступ к определенным единицам кода (например, компонентам, утилитам и т.д.) в формате ESM.

Поддерживаются два типа:
- `root:*`: экспорт исходных файлов, например: `root:src/components/button.vue`
- `npm:*`: экспорт сторонних зависимостей, например: `npm:vue`

Каждый элемент экспорта содержит следующие свойства:
- `name`: исходный путь экспорта, например: `npm:vue` или `root:src/components`
- `type`: тип пути (`npm` или `root`)
- `importName`: имя импорта, формат: `${serviceName}/${type}/${path}`
- `exportName`: путь экспорта относительно корневой директории сервиса
- `exportPath`: фактический путь к файлу
- `externalName`: имя внешней зависимости, используемое для идентификации при импорте этого модуля в других сервисах

#### links

Карта конфигураций зависимостей сервиса, используемая для настройки зависимостей текущего сервиса от других сервисов (локальных или удаленных) и их локальных путей. Ключом каждого элемента конфигурации является имя сервиса, а значением — локальный путь к этому сервису.

Конфигурация зависит от способа установки:
- Установка из исходного кода (Workspace, Git): необходимо указывать путь к директории dist, так как используются собранные файлы
- Установка через пакет (Link, статический сервер, приватный репозиторий, File): указывается путь к директории пакета, так как пакет уже содержит собранные файлы

#### imports

Карта внешних зависимостей, настраивающая используемые внешние зависимости, обычно это зависимости из удаленных модулей.

Каждая зависимость содержит следующие свойства:
- `match`: регулярное выражение для сопоставления с импортируемыми выражениями
- `import`: фактический путь к модулю

**Пример**:
```ts title="entry.node.ts"
import type { GezOptions } from '@gez/core';

export default {
  modules: {
    // Конфигурация экспорта
    exports: [
      'root:src/components/button.vue',  // Экспорт исходного файла
      'root:src/utils/format.ts',
      'npm:vue',  // Экспорт сторонней зависимости
      'npm:vue-router'
    ],

    // Конфигурация импорта
    links: {
      // Установка из исходного кода: необходимо указывать путь к директории dist
      'ssr-remote': 'root:./node_modules/ssr-remote/dist',
      // Установка через пакет: указывается путь к директории пакета
      'other-remote': 'root:./node_modules/other-remote'
    },

    // Конфигурация внешних зависимостей
    imports: {
      'vue': 'ssr-remote/npm/vue',
      'vue-router': 'ssr-remote/npm/vue-router'
    }
  }
} satisfies GezOptions;
```

### ParsedModuleConfig

- **Определение типа**:
```ts
interface ParsedModuleConfig {
  name: string
  root: string
  exports: {
    name: string
    type: PathType
    importName: string
    exportName: string
    exportPath: string
    externalName: string
  }[]
  links: Array<{
    /**
     * Имя пакета
     */
    name: string
    /**
     * Корневая директория пакета
     */
    root: string
  }>
  imports: Record<string, { match: RegExp; import?: string }>
}
```

Разобранная конфигурация модулей, преобразующая исходную конфигурацию модулей в стандартизированный внутренний формат:

#### name
Имя текущего сервиса
- Используется для идентификации модуля и генерации путей импорта

#### root
Путь к корневой директории текущего сервиса
- Используется для разрешения относительных путей и размещения собранных файлов

#### exports
Список конфигураций экспорта
- `name`: исходный путь экспорта, например: 'npm:vue' или 'root:src/components'
- `type`: тип пути (npm или root)
- `importName`: имя импорта, формат: '${serviceName}/${type}/${path}'
- `exportName`: путь экспорта относительно корневой директории сервиса
- `exportPath`: фактический путь к файлу
- `externalName`: имя внешней зависимости, используемое для идентификации при импорте этого модуля в других сервисах

#### links
Список конфигураций импорта
- `name`: имя пакета
- `root`: корневая директория пакета

#### imports
Карта внешних зависимостей
- Сопоставляет пути импорта модулей с фактическим расположением модулей
- `match`: регулярное выражение для сопоставления с импортируемыми выражениями
- `import`: фактический путь к модулю