---
titleSuffix: Руководство по реализации клиентского рендеринга в Esmx
description: Подробное описание механизма клиентского рендеринга в Esmx, включая статическую сборку, стратегии развертывания и лучшие практики, помогающие разработчикам реализовать эффективный фронтенд-рендеринг в бессерверной среде.
head:
  - - meta
    - property: keywords
      content: Esmx, клиентский рендеринг, CSR, статическая сборка, фронтенд-рендеринг, бессерверное развертывание, оптимизация производительности
---

# Клиентский рендеринг

Клиентский рендеринг (Client-Side Rendering, CSR) — это технология выполнения рендеринга страниц на стороне браузера. В Esmx, если ваше приложение не может быть развернуто на сервере Node.js, вы можете сгенерировать статический файл `index.html` на этапе сборки для реализации чистого клиентского рендеринга.

## Сценарии использования

Клиентский рендеринг рекомендуется в следующих случаях:

- **Статические хостинги**: такие как GitHub Pages, CDN и другие сервисы хостинга, которые не поддерживают серверный рендеринг.
- **Простые приложения**: небольшие приложения, где не критичны скорость загрузки первой страницы и SEO.
- **Среда разработки**: для быстрого предварительного просмотра и отладки приложения на этапе разработки.

## Настройка

### Конфигурация HTML-шаблона

В режиме клиентского рендеринга необходимо настроить универсальный HTML-шаблон. Этот шаблон будет служить контейнером для приложения, содержащим необходимые ссылки на ресурсы и точку монтирования.

```ts title="src/entry.server.ts"
import type { RenderContext } from '@esmx/core';

export default async (rc: RenderContext) => {
    // Фиксация сбора зависимостей
    await rc.commit();
    
    // Настройка HTML-шаблона
    rc.html = `
<!DOCTYPE html>
<html>
<head>
    ${rc.preload()}           // Предзагрузка ресурсов
    <title>Esmx</title>
    ${rc.css()}               // Внедрение стилей
</head>
<body>
    <div id="app"></div>
    ${rc.importmap()}         // Карта импорта
    ${rc.moduleEntry()}       // Входной модуль
    ${rc.modulePreload()}     // Предзагрузка модулей
</body>
</html>
`;
};
```

### Генерация статического HTML

Для использования клиентского рендеринга в производственной среде необходимо сгенерировать статический HTML-файл на этапе сборки. Esmx предоставляет функцию `postBuild` для реализации этой функциональности:

```ts title="src/entry.node.ts"
import type { EsmxOptions } from '@esmx/core';

export default {
    async postBuild(esmx) {
        // Генерация статического HTML-файла
        const rc = await esmx.render();
        // Запись HTML-файла
        esmx.writeSync(
            esmx.resolvePath('dist/client', 'index.html'),
            rc.html
        );
    }
} satisfies EsmxOptions;
```