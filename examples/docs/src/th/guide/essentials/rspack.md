---
titleSuffix: Esmx Framework เครื่องมือสร้างประสิทธิภาพสูง
description: วิเคราะห์เชิงลึกเกี่ยวกับระบบสร้าง Rspack ของ Esmx Framework รวมถึงคุณสมบัติหลัก เช่น การคอมไพล์ประสิทธิภาพสูง การสร้างหลายสภาพแวดล้อม การปรับทรัพยากรให้เหมาะสม เพื่อช่วยให้นักพัฒนาสามารถสร้างเว็บแอปพลิเคชันสมัยใหม่ที่มีประสิทธิภาพและเชื่อถือได้
head:
  - - meta
    - property: keywords
      content: Esmx, Rspack, ระบบสร้าง, การคอมไพล์ประสิทธิภาพสูง, การอัปเดตร้อน, การสร้างหลายสภาพแวดล้อม, Tree Shaking, การแบ่งโค้ด, SSR, การปรับทรัพยากรให้เหมาะสม, ประสิทธิภาพการพัฒนา, เครื่องมือสร้าง
---

# Rspack

Esmx ใช้ระบบสร้าง [Rspack](https://rspack.dev/) เป็นพื้นฐาน ซึ่งใช้ประโยชน์จากความสามารถในการสร้างประสิทธิภาพสูงของ Rspack อย่างเต็มที่ เอกสารนี้จะแนะนำตำแหน่งและฟังก์ชันหลักของ Rspack ใน Esmx Framework

## คุณสมบัติ

Rspack เป็นระบบสร้างหลักของ Esmx Framework โดยมีคุณสมบัติสำคัญดังต่อไปนี้:

- **การสร้างประสิทธิภาพสูง**: เครื่องมือสร้างที่พัฒนาด้วย Rust ให้ความเร็วในการคอมไพล์ที่รวดเร็ว ช่วยเพิ่มความเร็วในการสร้างโปรเจกต์ขนาดใหญ่
- **การปรับปรุงประสบการณ์การพัฒนา**: รองรับการอัปเดตร้อน (HMR), การคอมไพล์แบบเพิ่มเติม และคุณสมบัติการพัฒนาสมัยใหม่อื่น ๆ เพื่อให้ประสบการณ์การพัฒนาที่ลื่นไหล
- **การสร้างหลายสภาพแวดล้อม**: การตั้งค่าการสร้างแบบรวมที่รองรับสภาพแวดล้อมไคลเอนต์ (client), เซิร์ฟเวอร์ (server) และ Node.js (node) ทำให้กระบวนการพัฒนาหลายแพลตฟอร์มง่ายขึ้น
- **การปรับทรัพยากรให้เหมาะสม**: ความสามารถในการจัดการและปรับทรัพยากรให้เหมาะสม เช่น การแบ่งโค้ด, Tree Shaking, การบีบอัดทรัพยากร

## การสร้างแอปพลิเคชัน

ระบบสร้าง Rspack ของ Esmx ออกแบบมาแบบโมดูลาร์ โดยมีโมดูลหลักดังต่อไปนี้:

### @esmx/rspack

โมดูลสร้างพื้นฐาน ให้ความสามารถหลักดังต่อไปนี้:

- **การตั้งค่าการสร้างแบบรวม**: จัดการการตั้งค่าการสร้างมาตรฐาน รองรับการตั้งค่าหลายสภาพแวดล้อม
- **การจัดการทรัพยากร**: รองรับการจัดการทรัพยากร เช่น TypeScript, CSS, รูปภาพ
- **การปรับปรุงการสร้าง**: ให้คุณสมบัติการปรับปรุงประสิทธิภาพ เช่น การแบ่งโค้ด, Tree Shaking
- **เซิร์ฟเวอร์พัฒนา**: รวมเซิร์ฟเวอร์พัฒนาประสิทธิภาพสูง รองรับ HMR

### @esmx/rspack-vue

โมดูลสร้างเฉพาะสำหรับ Vue Framework ให้ความสามารถดังต่อไปนี้:

- **การคอมไพล์คอมโพเนนต์ Vue**: รองรับการคอมไพล์คอมโพเนนต์ Vue 2/3 อย่างมีประสิทธิภาพ
- **การปรับปรุง SSR**: การปรับปรุงเฉพาะสำหรับการเรนเดอร์ฝั่งเซิร์ฟเวอร์
- **การปรับปรุงการพัฒนา**: การปรับปรุงฟังก์ชันเฉพาะสำหรับสภาพแวดล้อมการพัฒนา Vue

## กระบวนการสร้าง

กระบวนการสร้างของ Esmx แบ่งออกเป็นขั้นตอนหลักดังต่อไปนี้:

1. **การเริ่มต้นการตั้งค่า**
   - โหลดการตั้งค่าโปรเจกต์
   - รวมการตั้งค่าเริ่มต้นและการตั้งค่าผู้ใช้
   - ปรับการตั้งค่าตามตัวแปรสภาพแวดล้อม

2. **การคอมไพล์ทรัพยากร**
   - วิเคราะห์การพึ่งพาโค้ดต้นฉบับ
   - แปลงทรัพยากรต่าง ๆ (TypeScript, CSS เป็นต้น)
   - จัดการการนำเข้าและส่งออกโมดูล

3. **การปรับปรุง**
   - ดำเนินการแบ่งโค้ด
   - ใช้ Tree Shaking
   - บีบอัดโค้ดและทรัพยากร

4. **การสร้างผลลัพธ์**
   - สร้างไฟล์เป้าหมาย
   - ส่งออกการแมปทรัพยากร
   - สร้างรายงานการสร้าง

## แนวปฏิบัติที่ดีที่สุด

### การปรับปรุงสภาพแวดล้อมการพัฒนา

- **การตั้งค่าการคอมไพล์แบบเพิ่มเติม**: ตั้งค่าตัวเลือก `cache` อย่างเหมาะสม เพื่อใช้ประโยชน์จากแคชในการเพิ่มความเร็วการสร้าง
- **การปรับปรุง HMR**: ตั้งค่าขอบเขตการอัปเดตร้อนอย่างเหมาะสม เพื่อหลีกเลี่ยงการอัปเดตโมดูลที่ไม่จำเป็น
- **การปรับปรุงการจัดการทรัพยากร**: ใช้การตั้งค่า loader ที่เหมาะสม เพื่อหลีกเลี่ยงการประมวลผลซ้ำ

### การปรับปรุงสภาพแวดล้อมการผลิต

- **กลยุทธ์การแบ่งโค้ด**: ตั้งค่า `splitChunks` อย่างเหมาะสม เพื่อปรับปรุงการโหลดทรัพยากร
- **การบีบอัดทรัพยากร**: เปิดใช้งานการตั้งค่าการบีบอัดที่เหมาะสม เพื่อสร้างสมดุลระหว่างเวลาการสร้างและขนาดผลลัพธ์
- **การปรับปรุงแคช**: ใช้ประโยชน์จากแฮชเนื้อหาและกลยุทธ์แคชระยะยาว เพื่อเพิ่มประสิทธิภาพการโหลด

## ตัวอย่างการตั้งค่า

```ts title="src/entry.node.ts"
import type { EsmxOptions } from '@esmx/core';

export default {
    async devApp(esmx) {
        return import('@esmx/rspack').then((m) =>
            m.createRspackHtmlApp(esmx, {
                // การตั้งค่าการสร้างแบบกำหนดเอง
                config({ config }) {
                    // เพิ่มการตั้งค่า Rspack ที่กำหนดเองที่นี่
                }
            })
        );
    },
} satisfies EsmxOptions;
```

::: tip
สำหรับคำอธิบาย API และตัวเลือกการตั้งค่าเพิ่มเติม โปรดดูที่ [เอกสาร API Rspack](/api/app/rspack.html)
:::