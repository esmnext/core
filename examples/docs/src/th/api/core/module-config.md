---
titleSuffix: Esmx Framework Module Configuration API Reference
description: รายละเอียดเกี่ยวกับอินเทอร์เฟซการกำหนดค่า ModuleConfig ของเฟรมเวิร์ก Esmx รวมถึงกฎการนำเข้าและส่งออกโมดูล การกำหนดค่าชื่อแฝง และการจัดการการพึ่งพาภายนอก ช่วยให้นักพัฒนามีความเข้าใจลึกซึ้งเกี่ยวกับระบบโมดูลของเฟรมเวิร์ก
head:
  - - meta
    - property: keywords
      content: Esmx, ModuleConfig, การกำหนดค่าโมดูล, การนำเข้าและส่งออกโมดูล, การพึ่งพาภายนอก, การกำหนดค่าชื่อแฝง, การจัดการการพึ่งพา, Web Application Framework
---

# ModuleConfig

ModuleConfig ให้ความสามารถในการกำหนดค่าโมดูลของเฟรมเวิร์ก Esmx ใช้สำหรับกำหนดกฎการนำเข้าและส่งออกโมดูล การกำหนดค่าชื่อแฝง และการพึ่งพาภายนอก

## นิยามประเภท

### PathType

- **นิยามประเภท**:
```ts
enum PathType {
  npm = 'npm:', 
  root = 'root:'
}
```

การแจงนับประเภทเส้นทางโมดูล:
- `npm`: หมายถึงการพึ่งพาใน node_modules
- `root`: หมายถึงไฟล์ในไดเรกทอรีรากของโปรเจกต์

### ModuleConfig

- **นิยามประเภท**:
```ts
interface ModuleConfig {
  exports?: string[]
  links?: Record<string, string>
  imports?: Record<string, string>
}
```

อินเทอร์เฟซการกำหนดค่าโมดูล ใช้สำหรับกำหนดค่าการส่งออก การนำเข้า และการพึ่งพาภายนอกของบริการ

#### exports

รายการกำหนดค่าการส่งออก ใช้เพื่อเปิดเผยหน่วยโค้ดเฉพาะ (เช่น คอมโพเนนต์ ฟังก์ชันเครื่องมือ ฯลฯ) ในรูปแบบ ESM

รองรับสองประเภท:
- `root:*`: ส่งออกไฟล์ต้นฉบับ เช่น: `root:src/components/button.vue`
- `npm:*`: ส่งออกการพึ่งพาบุคคลที่สาม เช่น: `npm:vue`

แต่ละรายการส่งออกมีคุณสมบัติต่อไปนี้:
- `name`: เส้นทางส่งออกต้นฉบับ เช่น: `npm:vue` หรือ `root:src/components`
- `type`: ประเภทเส้นทาง (`npm` หรือ `root`)
- `importName`: ชื่อนำเข้า รูปแบบ: `${serviceName}/${type}/${path}`
- `exportName`: เส้นทางส่งออก เทียบกับไดเรกทอรีรากของบริการ
- `exportPath`: เส้นทางไฟล์จริง
- `externalName`: ชื่อการพึ่งพาภายนอก ใช้สำหรับระบุเมื่อบริการอื่นนำเข้าโมดูลนี้

#### links

การแมปการกำหนดค่าการพึ่งพาบริการ ใช้สำหรับกำหนดค่าบริการอื่นที่บริการปัจจุบันพึ่งพา (ท้องถิ่นหรือระยะไกล) และเส้นทางท้องถิ่นของบริการนั้น คีย์ของแต่ละรายการกำหนดค่าเป็นชื่อบริการ และค่าเป็นเส้นทางท้องถิ่นของบริการนั้น

วิธีการติดตั้งที่แตกต่างกัน การกำหนดค่าก็แตกต่างกัน:
- การติดตั้งจากซอร์สโค้ด (Workspace, Git): ต้องชี้ไปที่ไดเรกทอรี dist เนื่องจากต้องใช้ไฟล์ที่สร้างแล้ว
- การติดตั้งจากแพ็คเกจ (Link, เซิร์ฟเวอร์สแตติก, ตัวแทนส่วนตัว, File): ชี้ไปที่ไดเรกทอรีแพ็คเกจโดยตรง เนื่องจากแพ็คเกจมีไฟล์ที่สร้างแล้วอยู่แล้ว

#### imports

การแมปการพึ่งพาภายนอก กำหนดค่าการพึ่งพาภายนอกที่ต้องการใช้ มักเป็นการใช้การพึ่งพาจากโมดูลระยะไกล

แต่ละรายการพึ่งพามีคุณสมบัติต่อไปนี้:
- `match`: นิพจน์ทั่วไปสำหรับจับคู่คำสั่งนำเข้า
- `import`: เส้นทางโมดูลจริง

**ตัวอย่าง**:
```ts title="entry.node.ts"
import type { EsmxOptions } from '@esmx/core';

export default {
  modules: {
    // กำหนดค่าการส่งออก
    exports: [
      'root:src/components/button.vue',  // ส่งออกไฟล์ต้นฉบับ
      'root:src/utils/format.ts',
      'npm:vue',  // ส่งออกการพึ่งพาบุคคลที่สาม
      'npm:vue-router'
    ],

    // กำหนดค่าการนำเข้า
    links: {
      // การติดตั้งจากซอร์สโค้ด: ต้องชี้ไปที่ไดเรกทอรี dist
      'ssr-remote': 'root:./node_modules/ssr-remote/dist',
      // การติดตั้งจากแพ็คเกจ: ชี้ไปที่ไดเรกทอรีแพ็คเกจโดยตรง
      'other-remote': 'root:./node_modules/other-remote'
    },

    // กำหนดค่าการพึ่งพาภายนอก
    imports: {
      'vue': 'ssr-remote/npm/vue',
      'vue-router': 'ssr-remote/npm/vue-router'
    }
  }
} satisfies EsmxOptions;
```

### ParsedModuleConfig

- **นิยามประเภท**:
```ts
interface ParsedModuleConfig {
  name: string
  root: string
  exports: {
    name: string
    type: PathType
    importName: string
    exportName: string
    exportPath: string
    externalName: string
  }[]
  links: Array<{
    /**
     * ชื่อแพ็คเกจ
     */
    name: string
    /**
     * ไดเรกทอรีรากของแพ็คเกจ
     */
    root: string
  }>
  imports: Record<string, { match: RegExp; import?: string }>
}
```

การกำหนดค่าโมดูลที่ถูกแยกวิเคราะห์ แปลงการกำหนดค่าโมดูลดั้งเดิมเป็นรูปแบบมาตรฐานภายใน:

#### name
ชื่อของบริการปัจจุบัน
- ใช้สำหรับระบุโมดูลและสร้างเส้นทางนำเข้า

#### root
เส้นทางไดเรกทอรีรากของบริการปัจจุบัน
- ใช้สำหรับแยกวิเคราะห์เส้นทางสัมพัทธ์และที่เก็บผลลัพธ์การสร้าง

#### exports
รายการกำหนดค่าการส่งออก
- `name`: เส้นทางส่งออกต้นฉบับ เช่น: 'npm:vue' หรือ 'root:src/components'
- `type`: ประเภทเส้นทาง (npm หรือ root)
- `importName`: ชื่อนำเข้า รูปแบบ: '${serviceName}/${type}/${path}'
- `exportName`: เส้นทางส่งออก เทียบกับไดเรกทอรีรากของบริการ
- `exportPath`: เส้นทางไฟล์จริง
- `externalName`: ชื่อการพึ่งพาภายนอก ใช้สำหรับระบุเมื่อบริการอื่นนำเข้าโมดูลนี้

#### links
รายการกำหนดค่าการนำเข้า
- `name`: ชื่อแพ็คเกจ
- `root`: ไดเรกทอรีรากของแพ็คเกจ

#### imports
การแมปการพึ่งพาภายนอก
- แมปเส้นทางนำเข้าโมดูลไปยังตำแหน่งโมดูลจริง
- `match`: นิพจน์ทั่วไปสำหรับจับคู่คำสั่งนำเข้า
- `import`: เส้นทางโมดูลจริง