---
titleSuffix: Esmx เฟรมเวิร์กอินเทอร์เฟซแอปพลิเคชันนามธรรม
description: รายละเอียดเกี่ยวกับอินเทอร์เฟซ App ของ Esmx เฟรมเวิร์ก รวมถึงการจัดการวงจรชีวิตแอปพลิเคชัน การจัดการทรัพยากรแบบคงที่ และฟังก์ชันการเรนเดอร์ฝั่งเซิร์ฟเวอร์ เพื่อช่วยให้นักพัฒนาทำความเข้าใจและใช้ฟังก์ชันหลักของแอปพลิเคชัน
head:
  - - meta
    - property: keywords
      content: Esmx, App, แอปพลิเคชันนามธรรม, วงจรชีวิต, ทรัพยากรแบบคงที่, การเรนเดอร์ฝั่งเซิร์ฟเวอร์, API
---

# App

`App` เป็นนามธรรมของแอปพลิเคชันใน Esmx เฟรมเวิร์ก ที่ให้อินเทอร์เฟซแบบรวมศูนย์เพื่อจัดการวงจรชีวิตแอปพลิเคชัน ทรัพยากรแบบคงที่ และการเรนเดอร์ฝั่งเซิร์ฟเวอร์

```ts title="entry.node.ts"
export default {
  // การกำหนดค่าสำหรับสภาพแวดล้อมการพัฒนา
  async devApp(esmx) {
    return import('@esmx/rspack').then((m) =>
      m.createRspackHtmlApp(esmx, {
        config(rc) {
          // การกำหนดค่า Rspack แบบกำหนดเอง
        }
      })
    );
  }
}
```

## นิยามประเภท
### App

```ts
interface App {
  middleware: Middleware;
  render: (options?: RenderContextOptions) => Promise<RenderContext>;
  build?: () => Promise<boolean>;
  destroy?: () => Promise<boolean>;
}
```

#### middleware

- **ประเภท**: `Middleware`

มิดเดิลแวร์สำหรับจัดการทรัพยากรแบบคงที่

สภาพแวดล้อมการพัฒนา:
- จัดการคำขอทรัพยากรแบบคงที่จากซอร์สโค้ด
- รองรับการคอมไพล์แบบเรียลไทม์และฮอตรีโหลด
- ใช้กลยุทธ์แคชแบบ no-cache

สภาพแวดล้อมการผลิต:
- จัดการทรัพยากรแบบคงที่ที่ถูกสร้างแล้ว
- รองรับการแคชระยะยาวสำหรับไฟล์ที่ไม่เปลี่ยนแปลง (.final.xxx)
- กลยุทธ์การโหลดทรัพยากรที่ได้รับการปรับปรุง

```ts
server.use(esmx.middleware);
```

#### render

- **ประเภท**: `(options?: RenderContextOptions) => Promise<RenderContext>`

ฟังก์ชันการเรนเดอร์ฝั่งเซิร์ฟเวอร์ ให้การใช้งานที่แตกต่างกันตามสภาพแวดล้อม:
- สภาพแวดล้อมการผลิต (start): โหลดไฟล์เข้าสู่เซิร์ฟเวอร์ที่ถูกสร้างแล้ว (entry.server) เพื่อทำการเรนเดอร์
- สภาพแวดล้อมการพัฒนา (dev): โหลดไฟล์เข้าสู่เซิร์ฟเวอร์จากซอร์สโค้ดเพื่อทำการเรนเดอร์

```ts
const rc = await esmx.render({
  params: { url: '/page' }
});
res.end(rc.html);
```

#### build

- **ประเภท**: `() => Promise<boolean>`

ฟังก์ชันการสร้างสำหรับสภาพแวดล้อมการผลิต ใช้สำหรับการแพ็คเกจและปรับปรุงทรัพยากร ส่งคืน true หากการสร้างสำเร็จ และ false หากล้มเหลว

#### destroy

- **ประเภท**: `() => Promise<boolean>`

ฟังก์ชันการทำความสะอาดทรัพยากร ใช้สำหรับการปิดเซิร์ฟเวอร์ การตัดการเชื่อมต่อ ฯลฯ ส่งคืน true หากการทำความสะอาดสำเร็จ และ false หากล้มเหลว