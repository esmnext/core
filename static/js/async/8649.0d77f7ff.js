"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["8649"],{66308:function(e,n,s){s.r(n),s.d(n,{default:()=>c});var r=s(31549),d=s(6603);function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h3:"h3",h4:"h4",ul:"ul",li:"li",strong:"strong",h2:"h2",code:"code",pre:"pre",ol:"ol"},(0,d.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"การเชื่อมโยงโมดูล",children:["การเชื่อมโยงโมดูล",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การเชื่อมโยงโมดูล",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Gez Framework มีกลไกการเชื่อมโยงโมดูลที่สมบูรณ์สำหรับการจัดการการแชร์โค้ดและ dependencies ระหว่างเซอร์วิส กลไกนี้ถูกพัฒนาบนพื้นฐานของ ESM (ECMAScript Module) specification ซึ่งรองรับการ export และ import โมดูลในระดับ source code พร้อมทั้งมีฟังก์ชันการจัดการ dependencies ที่ครบถ้วน"}),"\n",(0,r.jsxs)(n.h3,{id:"แนวคิดหลัก",children:["แนวคิดหลัก",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#แนวคิดหลัก",children:"#"})]}),"\n",(0,r.jsxs)(n.h4,{id:"การส่งออกโมดูล-module-export",children:["การส่งออกโมดูล (Module Export)",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การส่งออกโมดูล-module-export",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"การส่งออกโมดูลคือกระบวนการที่โค้ดบางส่วนในเซอร์วิส (เช่น components, utility functions) ถูกเปิดเผยออกมาในรูปแบบ ESM รองรับการส่งออก 2 ประเภท:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"การส่งออก source code"}),": ส่งออกไฟล์ source code โดยตรงจากโปรเจค"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"การส่งออก dependencies"}),": ส่งออกแพคเกจ dependencies ของโปรเจค"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"การเชื่อมโยงโมดูล-module-link",children:["การเชื่อมโยงโมดูล (Module Link)",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การเชื่อมโยงโมดูล-module-link",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"การนำเข้าโมดูลคือกระบวนการที่เซอร์วิสหนึ่งสามารถนำเข้าโค้ดที่ถูกส่งออกจากเซอร์วิสอื่นได้ รองรับวิธีการติดตั้งหลายแบบ:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"การติดตั้ง source code"}),": เหมาะสำหรับสภาพแวดล้อมการพัฒนา รองรับการแก้ไขและ hot update แบบ real-time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"การติดตั้งแพคเกจ"}),": เหมาะสำหรับสภาพแวดล้อม production โดยใช้ build artifacts โดยตรง"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"การส่งออกโมดูล",children:["การส่งออกโมดูล",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การส่งออกโมดูล",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"คำอธิบายการตั้งค่า",children:["คำอธิบายการตั้งค่า",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#คำอธิบายการตั้งค่า",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["ตั้งค่าโมดูลที่ต้องการส่งออกใน ",(0,r.jsx)(n.code,{children:"entry.node.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        exports: [\n            // ส่งออกไฟล์ source code\n            'root:src/components/button.vue',  // Vue component\n            'root:src/utils/format.ts',        // Utility function\n            // ส่งออก dependencies\n            'npm:vue',                         // Vue framework\n            'npm:vue-router'                   // Vue Router\n        ]\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsx)(n.p,{children:"การตั้งค่าการส่งออกรองรับ 2 ประเภท:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"root:*"}),": ส่งออกไฟล์ source code โดยระบุ path จาก root directory ของโปรเจค"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"npm:*"}),": ส่งออก dependencies โดยระบุชื่อแพคเกจ"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"การนำเข้าโมดูล",children:["การนำเข้าโมดูล",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การนำเข้าโมดูล",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"คำอธิบายการตั้งค่า-1",children:["คำอธิบายการตั้งค่า",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#คำอธิบายการตั้งค่า-1",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["ตั้งค่าโมดูลที่ต้องการนำเข้าใน ",(0,r.jsx)(n.code,{children:"entry.node.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        // ตั้งค่าการเชื่อมโยง\n        links: {\n            // การติดตั้ง source code: ชี้ไปที่ build artifacts directory\n            'ssr-remote': 'root:./node_modules/ssr-remote/dist',\n            // การติดตั้งแพคเกจ: ชี้ไปที่แพคเกจ directory\n            'other-remote': 'root:./node_modules/other-remote'\n        },\n        // ตั้งค่าการแมปการนำเข้า\n        imports: {\n            // ใช้ dependencies จาก remote module\n            'vue': 'ssr-remote/npm/vue',\n            'vue-router': 'ssr-remote/npm/vue-router'\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsx)(n.p,{children:"คำอธิบายการตั้งค่า:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"imports"}),": ตั้งค่า local path ของ remote module"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"การติดตั้ง source code: ชี้ไปที่ build artifacts directory (dist)"}),"\n",(0,r.jsx)(n.li,{children:"การติดตั้งแพคเกจ: ชี้ไปที่แพคเกจ directory โดยตรง"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"externals"}),": ตั้งค่า external dependencies"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ใช้สำหรับแชร์ dependencies จาก remote module"}),"\n",(0,r.jsx)(n.li,{children:"ป้องกันการ bundle dependencies ซ้ำ"}),"\n",(0,r.jsx)(n.li,{children:"รองรับการแชร์ dependencies ระหว่างหลายโมดูล"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"วิธีการติดตั้ง",children:["วิธีการติดตั้ง",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#วิธีการติดตั้ง",children:"#"})]}),"\n",(0,r.jsxs)(n.h4,{id:"การติดตั้ง-source-code",children:["การติดตั้ง source code",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การติดตั้ง-source-code",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"เหมาะสำหรับสภาพแวดล้อมการพัฒนา รองรับการแก้ไขและ hot update แบบ real-time"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workspace 方式"}),"\nแนะนำสำหรับโปรเจค Monorepo:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "workspace:*"\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Link 方式"}),"\nใช้สำหรับการ debug ใน local environment:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "link:../ssr-remote"\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.h4,{id:"การติดตั้งแพคเกจ",children:["การติดตั้งแพคเกจ",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การติดตั้งแพคเกจ",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"เหมาะสำหรับสภาพแวดล้อม production โดยใช้ build artifacts โดยตรง"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"NPM Registry"}),"\nติดตั้งผ่าน npm registry:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "^1.0.0"\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Static Server"}),"\nติดตั้งผ่าน HTTP/HTTPS protocol:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "https://cdn.example.com/ssr-remote/1.0.0.tgz"\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"การ-build-แพคเกจ",children:["การ build แพคเกจ",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#การ-build-แพคเกจ",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"คำอธิบายการตั้งค่า-2",children:["คำอธิบายการตั้งค่า",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#คำอธิบายการตั้งค่า-2",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["ตั้งค่าตัวเลือกการ build ใน ",(0,r.jsx)(n.code,{children:"entry.node.ts"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    // ตั้งค่าการส่งออกโมดูล\n    modules: {\n        exports: [\n            'root:src/components/button.vue',\n            'root:src/utils/format.ts',\n            'npm:vue'\n        ]\n    },\n    // ตั้งค่าการ build\n    pack: {\n        // เปิดใช้งานการ build\n        enable: true,\n\n        // ตั้งค่า output\n        outputs: [\n            'dist/client/versions/latest.tgz',\n            'dist/client/versions/1.0.0.tgz'\n        ],\n\n        // ปรับแต่ง package.json\n        packageJson: async (gez, pkg) => {\n            pkg.version = '1.0.0';\n            return pkg;\n        },\n\n        // การประมวลผลก่อน build\n        onBefore: async (gez, pkg) => {\n            // สร้าง type declarations\n            // รัน test cases\n            // อัปเดตเอกสาร ฯลฯ\n        },\n\n        // การประมวลผลหลัง build\n        onAfter: async (gez, pkg, file) => {\n            // อัปโหลดไปยัง CDN\n            // เผยแพร่ไปยัง npm registry\n            // deploy ไปยัง test environment ฯลฯ\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"ผลลัพธ์การ-build",children:["ผลลัพธ์การ build",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ผลลัพธ์การ-build",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"your-app-name.tgz\n├── package.json        # ข้อมูลแพคเกจ\n├── index.js            # production entry point\n├── server/             # server-side resources\n│   └── manifest.json   # server-side resource mapping\n├── node/               # Node.js runtime\n└── client/             # client-side resources\n    └── manifest.json   # client-side resource mapping\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"กระบวนการเผยแพร่",children:["กระบวนการเผยแพร่",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#กระบวนการเผยแพร่",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 1. build production version\ngez build\n\n# 2. เผยแพร่ไปยัง npm\nnpm publish dist/versions/your-app-name.tgz\n"})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let c=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["th%2Fguide%2Fessentials%2Fmodule-link.md"]={toc:[{text:"แนวคิดหลัก",id:"แนวคิดหลัก",depth:3},{text:"การส่งออกโมดูล (Module Export)",id:"การส่งออกโมดูล-module-export",depth:4},{text:"การเชื่อมโยงโมดูล (Module Link)",id:"การเชื่อมโยงโมดูล-module-link",depth:4},{text:"การส่งออกโมดูล",id:"การส่งออกโมดูล",depth:2},{text:"คำอธิบายการตั้งค่า",id:"คำอธิบายการตั้งค่า",depth:3},{text:"การนำเข้าโมดูล",id:"การนำเข้าโมดูล",depth:2},{text:"คำอธิบายการตั้งค่า",id:"คำอธิบายการตั้งค่า-1",depth:3},{text:"วิธีการติดตั้ง",id:"วิธีการติดตั้ง",depth:3},{text:"การติดตั้ง source code",id:"การติดตั้ง-source-code",depth:4},{text:"การติดตั้งแพคเกจ",id:"การติดตั้งแพคเกจ",depth:4},{text:"การ build แพคเกจ",id:"การ-build-แพคเกจ",depth:2},{text:"คำอธิบายการตั้งค่า",id:"คำอธิบายการตั้งค่า-2",depth:3},{text:"ผลลัพธ์การ build",id:"ผลลัพธ์การ-build",depth:3},{text:"กระบวนการเผยแพร่",id:"กระบวนการเผยแพร่",depth:3}],title:"การเชื่อมโยงโมดูล",headingTitle:"การเชื่อมโยงโมดูล",frontmatter:{titleSuffix:"Gez Framework - กลไกการแชร์โค้ดระหว่างเซอร์วิส",description:"รายละเอียดเกี่ยวกับกลไกการเชื่อมโยงโมดูลของ Gez Framework รวมถึงการแชร์โค้ดระหว่างเซอร์วิส การจัดการ dependencies และการใช้งาน ESM specification เพื่อช่วยให้นักพัฒนาสามารถสร้างแอปพลิเคชันไมโครฟรอนต์เอนด์ได้อย่างมีประสิทธิภาพ",head:[["meta",{property:"keywords",content:"Gez, Module Link, ESM, Code Sharing, Dependency Management, Micro Frontend"}]]}}}}]);