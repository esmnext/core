"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["5072"],{75451:function(e,n,s){s.r(n),s.d(n,{default:()=>d});var t=s(31549),r=s(6603);function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h3:"h3",h4:"h4",ul:"ul",li:"li",strong:"strong",h2:"h2",code:"code",pre:"pre",ol:"ol"},(0,r.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"liaison-de-modules",children:["Liaison de modules",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#liaison-de-modules",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Le framework Gez fournit un m\xe9canisme complet de liaison de modules pour g\xe9rer le partage de code et les d\xe9pendances entre services. Ce m\xe9canisme est bas\xe9 sur la sp\xe9cification ESM (ECMAScript Module), supportant l'exportation et l'importation de modules au niveau du code source, ainsi qu'une gestion compl\xe8te des d\xe9pendances."}),"\n",(0,t.jsxs)(n.h3,{id:"concepts-cl\\xe9s",children:["Concepts cl\xe9s",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#concepts-cl\\xe9s",children:"#"})]}),"\n",(0,t.jsxs)(n.h4,{id:"exportation-de-modules",children:["Exportation de modules",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exportation-de-modules",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"L'exportation de modules est le processus d'exposition d'unit\xe9s de code sp\xe9cifiques (comme des composants, des fonctions utilitaires, etc.) d'un service au format ESM. Deux types d'exportation sont support\xe9s :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Exportation de code source"})," : Exportation directe des fichiers de code source du projet"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Exportation de d\xe9pendances"})," : Exportation des packages de d\xe9pendances tiers utilis\xe9s par le projet"]}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"liaison-de-modules-1",children:["Liaison de modules",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#liaison-de-modules-1",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"L'importation de modules est le processus de r\xe9f\xe9rencement d'unit\xe9s de code export\xe9es par d'autres services dans un service. Plusieurs m\xe9thodes d'installation sont support\xe9es :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Installation de code source"})," : Adapt\xe9e \xe0 l'environnement de d\xe9veloppement, supporte les modifications en temps r\xe9el et la mise \xe0 jour \xe0 chaud"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Installation de package"})," : Adapt\xe9e \xe0 l'environnement de production, utilise directement les artefacts de construction"]}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"exportation-de-modules-1",children:["Exportation de modules",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exportation-de-modules-1",children:"#"})]}),"\n",(0,t.jsxs)(n.h3,{id:"configuration",children:["Configuration",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["Configurez les modules \xe0 exporter dans ",(0,t.jsx)(n.code,{children:"entry.node.ts"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        exports: [\n            // Exporter des fichiers de code source\n            'root:src/components/button.vue',  // Composant Vue\n            'root:src/utils/format.ts',        // Fonction utilitaire\n            // Exporter des d\xe9pendances tiers\n            'npm:vue',                         // Framework Vue\n            'npm:vue-router'                   // Vue Router\n        ]\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,t.jsx)(n.p,{children:"La configuration d'exportation supporte deux types :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"root:*"})," : Exporter des fichiers de code source, chemin relatif \xe0 la racine du projet"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"npm:*"})," : Exporter des d\xe9pendances tiers, sp\xe9cifiez directement le nom du package"]}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"importation-de-modules",children:["Importation de modules",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#importation-de-modules",children:"#"})]}),"\n",(0,t.jsxs)(n.h3,{id:"configuration-1",children:["Configuration",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-1",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["Configurez les modules \xe0 importer dans ",(0,t.jsx)(n.code,{children:"entry.node.ts"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    modules: {\n        // Configuration des liens\n        links: {\n            // Installation de code source : pointe vers le r\xe9pertoire des artefacts de construction\n            'ssr-remote': 'root:./node_modules/ssr-remote/dist',\n            // Installation de package : pointe vers le r\xe9pertoire du package\n            'other-remote': 'root:./node_modules/other-remote'\n        },\n        // Configuration des importations\n        imports: {\n            // Utiliser les d\xe9pendances du module distant\n            'vue': 'ssr-remote/npm/vue',\n            'vue-router': 'ssr-remote/npm/vue-router'\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Explication des options de configuration :"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"imports"})," : Configure le chemin local des modules distants"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Installation de code source : pointe vers le r\xe9pertoire des artefacts de construction (dist)"}),"\n",(0,t.jsx)(n.li,{children:"Installation de package : pointe directement vers le r\xe9pertoire du package"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"externals"})," : Configure les d\xe9pendances externes"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Utilis\xe9 pour partager les d\xe9pendances des modules distants"}),"\n",(0,t.jsx)(n.li,{children:"\xc9vite de dupliquer les m\xeames d\xe9pendances"}),"\n",(0,t.jsx)(n.li,{children:"Supporte le partage de d\xe9pendances entre plusieurs modules"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"m\\xe9thodes-dinstallation",children:["M\xe9thodes d'installation",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#m\\xe9thodes-dinstallation",children:"#"})]}),"\n",(0,t.jsxs)(n.h4,{id:"installation-de-code-source",children:["Installation de code source",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installation-de-code-source",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Adapt\xe9e \xe0 l'environnement de d\xe9veloppement, supporte les modifications en temps r\xe9el et la mise \xe0 jour \xe0 chaud."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"M\xe9thode Workspace"}),"\nRecommand\xe9 pour les projets Monorepo :"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "workspace:*"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"M\xe9thode Link"}),"\nUtilis\xe9 pour le d\xe9bogage local :"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "devDependencies": {\n        "ssr-remote": "link:../ssr-remote"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.h4,{id:"installation-de-package",children:["Installation de package",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#installation-de-package",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Adapt\xe9e \xe0 l'environnement de production, utilise directement les artefacts de construction."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"NPM Registry"}),"\nInstallation via npm registry :"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "^1.0.0"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Serveur statique"}),"\nInstallation via le protocole HTTP/HTTPS :"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="package.json"',children:'{\n    "dependencies": {\n        "ssr-remote": "https://cdn.example.com/ssr-remote/1.0.0.tgz"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.h2,{id:"construction-de-packages",children:["Construction de packages",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#construction-de-packages",children:"#"})]}),"\n",(0,t.jsxs)(n.h3,{id:"configuration-2",children:["Configuration",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration-2",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["Configurez les options de construction dans ",(0,t.jsx)(n.code,{children:"entry.node.ts"})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="src/entry.node.ts"',children:"import type { GezOptions } from '@gez/core';\n\nexport default {\n    // Configuration d'exportation de modules\n    modules: {\n        exports: [\n            'root:src/components/button.vue',\n            'root:src/utils/format.ts',\n            'npm:vue'\n        ]\n    },\n    // Configuration de construction\n    pack: {\n        // Activer la construction\n        enable: true,\n\n        // Configuration des sorties\n        outputs: [\n            'dist/client/versions/latest.tgz',\n            'dist/client/versions/1.0.0.tgz'\n        ],\n\n        // Personnalisation de package.json\n        packageJson: async (gez, pkg) => {\n            pkg.version = '1.0.0';\n            return pkg;\n        },\n\n        // Pr\xe9-traitement avant construction\n        onBefore: async (gez, pkg) => {\n            // G\xe9n\xe9rer des d\xe9clarations de type\n            // Ex\xe9cuter des tests\n            // Mettre \xe0 jour la documentation, etc.\n        },\n\n        // Post-traitement apr\xe8s construction\n        onAfter: async (gez, pkg, file) => {\n            // T\xe9l\xe9verser sur CDN\n            // Publier sur le d\xe9p\xf4t npm\n            // D\xe9ployer sur l'environnement de test, etc.\n        }\n    }\n} satisfies GezOptions;\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"artefacts-de-construction",children:["Artefacts de construction",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#artefacts-de-construction",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"your-app-name.tgz\n├── package.json        # Informations du package\n├── index.js            # Point d'entr\xe9e pour l'environnement de production\n├── server/             # Ressources c\xf4t\xe9 serveur\n│   └── manifest.json   # Mappage des ressources c\xf4t\xe9 serveur\n├── node/               # Runtime Node.js\n└── client/             # Ressources c\xf4t\xe9 client\n    └── manifest.json   # Mappage des ressources c\xf4t\xe9 client\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"processus-de-publication",children:["Processus de publication",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#processus-de-publication",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# 1. Construire la version de production\ngez build\n\n# 2. Publier sur npm\nnpm publish dist/versions/your-app-name.tgz\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}let d=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["fr%2Fguide%2Fessentials%2Fmodule-link.md"]={toc:[{text:"Concepts cl\xe9s",id:"concepts-cl\xe9s",depth:3},{text:"Exportation de modules",id:"exportation-de-modules",depth:4},{text:"Liaison de modules",id:"liaison-de-modules-1",depth:4},{text:"Exportation de modules",id:"exportation-de-modules-1",depth:2},{text:"Configuration",id:"configuration",depth:3},{text:"Importation de modules",id:"importation-de-modules",depth:2},{text:"Configuration",id:"configuration-1",depth:3},{text:"M\xe9thodes d'installation",id:"m\xe9thodes-dinstallation",depth:3},{text:"Installation de code source",id:"installation-de-code-source",depth:4},{text:"Installation de package",id:"installation-de-package",depth:4},{text:"Construction de packages",id:"construction-de-packages",depth:2},{text:"Configuration",id:"configuration-2",depth:3},{text:"Artefacts de construction",id:"artefacts-de-construction",depth:3},{text:"Processus de publication",id:"processus-de-publication",depth:3}],title:"Liaison de modules",headingTitle:"Liaison de modules",frontmatter:{titleSuffix:"M\xe9canisme de partage de code entre services dans le framework Gez",description:"D\xe9taille le m\xe9canisme de liaison de modules du framework Gez, y compris le partage de code entre services, la gestion des d\xe9pendances et l'impl\xe9mentation de la sp\xe9cification ESM, aidant les d\xe9veloppeurs \xe0 construire des applications micro-frontend efficaces.",head:[["meta",{property:"keywords",content:"Gez, liaison de modules, Module Link, ESM, partage de code, gestion des d\xe9pendances, micro-frontend"}]]}}}}]);